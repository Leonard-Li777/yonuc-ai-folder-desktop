# 仮想ディレクトリガイド

## 概要

`.VirtualDirectory` は本アプリケーションによって自動生成される仮想ディレクトリで、インテリジェントに整理された後のファイル構造を表示するために使用されます。元のディレクトリ内のファイルと1対1の対応関係を維持しながら、インテリジェントな名前付けを行います。

## 目的

この仮想ディレクトリの主な目的は、ユーザーが元のファイルを実際に移動またはコピーすることなく、ファイル整理の結果をプレビューできるようにすることです。
最終結果に満足した場合は、「実際のディレクトリを整理」をクリックして、実際のディレクトリを.VirtualDirectoryと同じファイル構造に整理し、その後本アプリケーションは.VirtualDirectoryディレクトリを削除します。

## 技術原理

### ハードリンク技術

仮想ディレクトリ内のファイルはハードリンク技術を使用して生成されます。ハードリンクはファイルの参照またはエイリアスと簡単に理解することができ、以下の特徴があります：

1. 追加の物理ディスク領域を占有しない
2. 元のファイルと同じデータブロックを共有する
3. ハードリンクされたファイルへの変更は元のファイルに同期される
4. ハードリンクされたファイルを削除しても元のファイルには影響しない
5. 元のファイルを削除する際は、ハードリンクされたファイルも削除する必要がある（本アプリケーションは実際のディレクトリでのファイル削除を積極的に検出し、それに応じて仮想ディレクトリ内のハードリンクされたファイルを削除します。）

### ショートカットとの違い

ハードリンクはいくつかの点でショートカットに似ていますが、重要な違いがあります：

| 特徴 | ショートカット | ハードリンク |
|------|-------------|------------|
| ファイルシステムレベル | Windowsのみの概念 | オペレーティングシステムのファイルシステム機能 |
| 占有領域 | 極小（メタデータのみ） | 追加領域なし |
| 元ファイル削除時 | ショートカットが無効になる | ハードリンクでファイル内容にアクセス可能 |
| 内容変更時 | 元ファイルに影響しない | すべてのリンクに同期 |
| 異なるボリューム間 | サポート | 同じファイルシステムに限定 |